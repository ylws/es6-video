"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),CFCMVideo=function(){function t(e){_classCallCheck(this,t),this.id=document.getElementById(e),this.listening=function(t,e,i){var n=this.id;n["on"+t]=function(){i(n[e])}},this.eventsarr=["progress","loadedmetadata","timeupdate","volumechange"]}return _createClass(t,[{key:"play",value:function(){this.id.play()}},{key:"readyState",value:function(t){return{ind:t,state:this.id.readyState}}},{key:"controls",value:function(t){this.id.controls=t}},{key:"mute",value:function(t){this.id.muted=t}},{key:"progress",value:function(t){this.listening("progress","progress",t)}},{key:"pause",value:function(){this.id.pause()}},{key:"playbackRate",value:function(t){this.id.playbackRate=t}},{key:"duration",value:function(t){this.listening("loadedmetadata","duration",t)}},{key:"timeupdate",value:function(t){this.listening("timeupdate","currentTime",t)}},{key:"playtoseconds",value:function(t,e){var i=this.id;t||(t=0),2==arguments.length?i.currentTime=t+e:i.currentTime=t}},{key:"volumchange",value:function(t){this.listening("volumechange","volume",t)}},{key:"volumset",value:function(t){this.id.volume=t}},{key:"removelistening",value:function(){for(var t=this.id,e=0;e<this.eventsarr.length;e++)t["on"+this.eventsarr[e]]=null}}]),t}(),LocalVideo=function(){function t(e){_classCallCheck(this,t),this.initVal(e)}return _createClass(t,[{key:"initVal",value:function(t){this.cfg={};var e={id:"playerArea",Fullscreenid:"V_fullScreen",logo:{img:"",style:""},durationcount:0,fullscreen:!1,playnowseconds:0,font:[],fontstyle:"",channel:[],channelB:[],channelS:[],channeltitle:[],playtype:!1,model:[],knowledge:[],autoplay:!1,listtopval:20,titleshow:"block",voicenum:2,setchannel:!1,volmchannelopen:!0,slidebackfn:!1,playbackRate:[.5,1,1.25,1.5,2,2.5,3,3.5,4,4.5,5],playbackRateflag:!0};_extends(this.cfg,e,t),this.initcommonVal()}},{key:"initcommonVal",value:function(){var t=this.cfg;if(t.WH=this.idstyle(t.widhei?t.widhei.wid:window.innerWidth,t.widhei?t.widhei.hei:window.innerHeight),this.platformcheck().mobile||t.channelB.length<=0&&t.channel.length<=0&&t.channelS.length<=0)this.domDeal();else{1==t.channelnum&&(t.mainfile[0]=0);for(var e=0;e<t.model.length;e++)"高清"==t.model[e]?t.model[e]={type:"high",name:"高清"}:"标清"==t.model[e]?t.model[e]={type:"normal",name:"标清"}:t.model[e]={type:"surper",name:"超清"};t.setchannel&&(t.mutedid="mute_"+t.mainfile[0]),t.totaltime=t.mainfile[1],document.oncontextmenu=function(){return!1},this.domDeal(),this.keycode(),t.model.length<=1&&this.setStyle(t.V_modelcontrol,"display","none"),t.channelnum.length<=1&&this.setStyle(t.V_volumcontrol,"display","none"),this.resize()}}},{key:"setStyle",value:function(t,e,i){t.style[e]=i}},{key:"setAttr",value:function(t,e,i){t.setAttribute(e,i)}},{key:"platformcheck",value:function(){var t=!!document.createElement("video").canPlayType,e=navigator.userAgent,i=e.match(/(iPhone|Android|iPad|Mobile|uc)/i),n=null!=e.match(/.(clr)*[rv:]([11.]+)/),l=null!=e.match(/.(msie)/gi),o=null!=e.match(/.(chrome)/gi),s=null!=e.match(/.(firefox)/gi),a=void 0;return i?a="mobile":t&&!i&&(a="pch5"),{ie11:n,ie:l,checkres:a,h5video:t,mobile:i,firefox:s,chrome:o}}},{key:"keycode",value:function(){var t=this,e=this.cfg;document.onkeydown=function(i){var n=i||window.event;if("122"==n.keyCode){if(e.lock)return e.f11count||(e.f11count=setTimeout(function(){delete e.f11secondtime,delete e.f11time,delete e.lock,clearTimeout(e.f11count),delete e.f11count},1e3)),n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.cancelBubble=!0,n.returnValue=!0),!1;e.f11time?(e.f11secondtime=(new Date).getTime(),e.f11secondtime-e.f11time<=1e3&&(console.log("您的操作太频繁，请稍后再试!"),e.lock=!0)):e.f11time=(new Date).getTime(),e.fullscreen?e.fullscreen=!1:e.fullscreen=!0,t.platformcheck().ie11||t.platformcheck().ie||(n.preventDefault?n.preventDefault():n.cancelBubble=!0,e.fullscreenObj.click())}else if("32"==n.keyCode)"block"==t.getStyle(e.V_pause,"display")?e.V_pause.click():e.V_play.click();else if("38"==n.keyCode)t.opts("updownvolum","add");else if("40"==n.keyCode)t.opts("updownvolum","subtract");else if("123"==n.keyCode)return n.preventDefault?n.preventDefault():n.cancelBubble=!0,!1}}},{key:"resize",value:function(){var t=null,e=this,i=this.cfg;window.addEventListener&&(window.onresize=function(){(e.platformcheck().ie11||e.platformcheck().ie||i.fullscreen||!e.platformcheck().chrome)&&(t&&clearTimeout(t),t=setTimeout(function(){e.resizeplayer(e)},100))})}},{key:"resizeplayer",value:function(t){var e=t.cfg;e.WH.wid!=screen.width&&e.WH.hei+0!=screen.height||(e.fullscreen=!1),e.fullscreen?(e.WH=t.idstyle(screen.width,screen.height),e.fullscreen=!0):(delete e.fullscreen,e.WH=t.idstyle(e.widhei?e.widhei.wid:window.innerWidth,e.widhei?e.widhei.hei:window.innerHeight));var i="";this.platformcheck().mobile&&(i="border-bottom:1px solid #666;"),t.setAttr(e.showObj,"style","width:"+e.WH.wid+"px;height:"+(e.WH.hei-1)+"px;"+i),t.countcreatevideo(e.channelnum),t.slideRefrash(),t.addknowledge(),t.voiceRefrash(),3==e.channelnum||e.channelnum}},{key:"domDeal",value:function(){var t=this.cfg;t.showObj=this.getid(t.id);var e="";this.platformcheck().mobile&&(e="border-bottom:1px solid #666;"),this.setAttr(t.showObj,"style","width:"+t.WH.wid+"px;height:"+t.WH.hei+"px;"+e),t.showObj.innerHTML=this.createvideo(t.channelnum),this.platformcheck().mobile||this.slidedom(),this.countcreatevideo(t.channelnum),3==t.channelnum||t.channelnum}},{key:"slidedom",value:function(){var t=this.cfg,e=this,i=document.createElement("div");this.setAttr(i,"class","control"),this.setAttr(i,"id","V_control");var n='\n\t\t\t<div class="play iconfont icon-bofang" id="V_play" style="display: block;"></div>\n\t\t\t<div class="pause iconfont icon-zanting1"  id="V_pause" style="display: none;"></div>\n\t\t\t<div class="nowtime" id="V_nowtime">00:00:00</div>\n\t\t\t<div class="totaltime" id="V_totaltime">00:00:00</div>\n\t\t\t<div class="timeline" id="V_timeline">\n\t\t\t \t<div id="V_playin" class="playin" style="width: 0px;"></div>\n\t\t\t \t<div class="playinbg" id="V_playinbg"></div>\n\t\t\t </div>\n\t\t\t <div class="fullScreen iconfont icon-a" id="'+t.Fullscreenid+'" title="F11进入ie全屏或退出全屏"></div>\n\t\t\t <div class="scroll" id="V_scroll" volumval="50">\n\t\t\t\t <div class="scrollson" id="V_scrollson" style="left: 25px;"></div>\n\t\t\t\t <div class="scrollsonbg" id="V_scrollsonbg" style="width: 25px;"></div>\n\t\t\t </div>\n\t\t\t\n\t\t\t <div class="volum iconfont icon-yinliangkai" id="V_volum"></div>\n\t\t\t\n\t\t\t<div class="modelcontrol" id="V_modelcontrol">\n\t\t\t\t<div class="title">清晰度</div>\n\t\t\t\t<div class="modelcontrollist" id="V_modelcontrollist"></div>\n\t\t\t</div>\n\t\t\t<div class="volumcontrol" id="V_volumcontrol">\n\t\t\t\t<div class="title">声音通道</div>\n\t\t\t\t<div class="volumcontrollist" id="V_volumcontrollist"></div>\n\t\t\t</div>\n\t\t\t<div class="playcontrol" id="V_playcontrol" style="display: '+(t.playbackRateflag?"block":"none")+'">\n\t\t\t\t<div class="title">播放倍率</div>\n\t\t\t\t<div class="playcontrollist" id="V_playcontrollist"></div>\n\t\t\t</div>\n\t\t';if(i.innerHTML=n,this.getid(t.id).appendChild(i),t.logo.img){var l=document.createElement("img");l.setAttribute("class","playlogo"),l.setAttribute("src",t.logo.img),l.setAttribute("style",t.logo.style),this.getid(t.id).appendChild(l)}if(t.font.length>0){var o=document.createElement("div");o.setAttribute("id","font"),o.setAttribute("class","font"),o.setAttribute("style",t.fontstyle),this.getid(t.id).appendChild(o),t.fontobj=this.getid("font")}t.fullscreenObj=this.getid(t.Fullscreenid),t.V_control=this.getid("V_control"),t.V_modelcontrol=this.getid("V_modelcontrol"),t.V_modelcontrollist=this.getid("V_modelcontrollist"),t.playbackRateflag&&(t.V_playcontrol=this.getid("V_playcontrol"),t.V_playcontrollist=this.getid("V_playcontrollist")),t.V_volum=this.getid("V_volum"),t.V_volumcontrol=this.getid("V_volumcontrol"),t.V_play=this.getid("V_play"),t.V_pause=this.getid("V_pause"),t.V_nowtime=this.getid("V_nowtime"),t.V_totaltime=this.getid("V_totaltime"),t.V_timeline=this.getid("V_timeline"),t.V_playin=this.getid("V_playin"),t.V_playinbg=this.getid("V_playinbg"),t.V_scroll=this.getid("V_scroll"),t.V_scrollson=this.getid("V_scrollson"),t.V_scrollsonbg=this.getid("V_scrollsonbg"),t.V_volumcontrollist=this.getid("V_volumcontrollist"),this.getid(t.id).onmouseenter=function(){t.V_control.style.height="40px",t.V_control.style.overflow="visible",e.showhide("block")},this.getid(t.id).onmouseleave=function(){t.V_control.style.height="0px",t.V_control.style.overflow="hidden",e.showhide("none"),"block"==e.getStyle(t.V_volumcontrollist,"display")&&e.setStyle(t.V_volumcontrollist,"display","none"),"block"==e.getStyle(t.V_modelcontrollist,"display")&&e.setStyle(t.V_modelcontrollist,"display","none")},this.opts("init"),this.opts("duration")}},{key:"showhide",value:function(t){var e=this.cfg,i=this.getid(e.id).querySelectorAll(".outtitle");Array.prototype.slice.call(i).forEach(function(e){e.style.display=t})}},{key:"addknowledge",value:function(){for(var t=this.cfg,e=t.WH.wid/parseInt(t.mainfile[1]),i="",n=t.knowledge,l=0;l<n.length;l++)i+='<div class="knowledge"  style="left:'+e*this.timetoseconds(n[l].time)+'px;"><div class="knowledgehover"><span class="content">'+n[l].content+"</span></div></div>";t.V_playinbg.innerHTML=i;var o=t.V_playinbg.querySelectorAll(".knowledge");Array.prototype.slice.call(o).forEach(function(t){t.onmouseenter=function(t){t||window.event;this.style.overflow="visible"},t.onmouseleave=function(t){t||window.event;this.style.overflow="hidden"}})}},{key:"videoopt",value:function(){var t=this,e=this.cfg;e.V_play.onclick=function(){t.opts("play"),e.modeltypechange&&(t.opts("jump",e.playnowseconds),e.modeltypechange=!1),t.setStyle(this,"display","none"),t.setStyle(e.V_pause,"display","block")},e.V_pause.onclick=function(){t.opts("pause"),t.setStyle(this,"display","none"),t.setStyle(e.V_play,"display","block")},e.model.length>1&&(e.V_modelcontrol.onclick=function(i){var n=i||window.event;n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.cancelBubble=!0,n.returnValue=!1),"none"==t.getStyle(e.V_modelcontrollist,"display")?t.setStyle(e.V_modelcontrollist,"display","block"):t.setStyle(e.V_modelcontrollist,"display","none")}),e.playbackRateflag&&(e.V_playcontrol.onclick=function(i){var n=i||window.event;n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.cancelBubble=!0,n.returnValue=!1),"none"==t.getStyle(e.V_playcontrollist,"display")?t.setStyle(e.V_playcontrollist,"display","block"):t.setStyle(e.V_playcontrollist,"display","none")}),e.V_volumcontrol.onclick=function(i){var n=i||window.event;n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.cancelBubble=!0,n.returnValue=!1),"none"==t.getStyle(e.V_volumcontrollist,"display")?t.setStyle(e.V_volumcontrollist,"display","block"):t.setStyle(e.V_volumcontrollist,"display","none")},e.V_volum.onclick=function(){var i=this.className.indexOf("icon-yinliangkai"),n=parseInt(e.V_scroll.getAttribute("volumval"));i<0?(t.setAttr(e.V_scrollsonbg,"style","width:"+n/e.voicenum+"px"),t.setAttr(e.V_scrollson,"style","left:"+n/e.voicenum+"px"),t.opts("volum",n/100,e.mutedid.split("_")[1]),t.setAttr(t.getid(e.mutedid),"class","mute iconon iconfont icon-yinliangkai"),this.className=this.className.replace(/(icon-yinliangguan)/gi,"icon-yinliangkai")):(e.V_volumcontrollist.querySelector(".iconon")&&(e.mutedid=e.V_volumcontrollist.querySelector(".iconon").getAttribute("id"),t.setAttr(e.V_volumcontrollist.querySelector(".iconon"),"class","mute iconoff iconfont icon-yinliangguan")),this.className=this.className.replace(/(icon-yinliangkai)/gi,"icon-yinliangguan"),t.setAttr(e.V_scrollsonbg,"style","width:0px"),t.setAttr(e.V_scrollson,"style","left:0px"),t.opts("volum",0))},e.fullscreenObj.onclick=function(){if(t.platformcheck().ie11||t.platformcheck().ie)return!1;this.className.indexOf("icon-a")>=0?(e.fullscreen=!0,t.FullScreen(e.showObj),t.setAttr(this,"class","outfullScreen iconfont icon-quanpingtuichu")):(e.fullscreen=!1,t.CancelFullScreen(),t.setAttr(this,"class","fullScreen iconfont icon-a"),t.resizeplayer(t))},this.voiceRefrash(),document.addEventListener&&(document.addEventListener("webkitfullscreenchange",function(){t.escFullScreen()},!1)||document.addEventListener("mozfullscreenchange",function(){t.escFullScreen()},!1)||document.addEventListener("fullscreenchange",function(){t.escFullScreen()},!1)||document.addEventListener("webkitfullscreenchange",function(){t.escFullScreen()},!1)),document.attachEvent&&document.attachEvent("msfullscreenchange",function(){t.escFullScreen()})}},{key:"voiceRefrash",value:function(){var t=this,e=this.cfg,i=(this.getoffset(e.showObj).left,!1),n=this.getoffset(e.V_scroll).left;e.V_scroll.onmousedown=function(l){var o=0,s=0;(i=!0)&&(document.onmousemove=function(i){var l=i||window.event,s=(o=l.pageX||l.clientX)-n>100/e.voicenum?100/e.voicenum:o-n;s=s<=0?0:s,t.setAttr(e.V_scrollsonbg,"style","width:"+s+"px"),t.setAttr(e.V_scrollson,"style","left:"+s+"px"),t.setAttr(e.V_scroll,"volumlen",s*e.voicenum),t.opts("volum",s/(100/e.voicenum),e.mutedid.split("_")[1]),0==s?t.setAttr(e.V_volum,"class","volum iconfont icon-yinliangguan"):t.setAttr(e.V_volum,"class","volum iconfont icon-yinliangkai")},document.onmouseup=function(l){var o=l||window.event;if(i){document.onmousemove=null;var a=(s=o.pageX||o.clientX)-n>100/e.voicenum?100/e.voicenum:s-n;a=a<=0?0:a,t.opts("volum",a/(100/e.voicenum),e.mutedid.split("_")[1]),t.setAttr(e.V_scrollsonbg,"style","width:"+a+"px"),t.setAttr(e.V_scrollson,"style","left:"+a+"px"),t.setAttr(e.V_scroll,"volumval",a*e.voicenum),0==a?t.setAttr(e.V_volum,"class","volum iconfont icon-yinliangguan"):t.setAttr(e.V_volum,"class","volum iconfont icon-yinliangkai")}i=!1})}}},{key:"slideRefrash",value:function(){var t=this,e=this.cfg,i=parseInt(e.mainfile[1]),n=i/e.WH.wid;t.setAttr(e.V_playin,"style","width:"+(e.playnowseconds/n).toFixed(2)+"px"),this["videobj_"+e.nowchannelnum].timeupdate(function(l){if(e.V_nowtime.innerHTML=t.timeformcat(parseInt(l)),e.font.length>0)for(var o=0;o<e.font.length;o++)parseInt(l)==e.font[o].time?e.fontobj.innerHTML=e.font[o].content:e.fontobj.innerHTML="";var s=l/n;t.setAttr(e.V_playin,"style","width:"+s.toFixed(2)+"px"),e.playnowseconds>parseInt(l)?(t.opts("jump",e.playnowseconds),e.playnowseconds=parseInt(l)):parseInt(l)==i?(e.playnowseconds=0,t.opts("jump",0),"infinite"!==e.playtype&&e.V_pause.click()):e.playnowseconds=parseInt(l)}),this.slideoptRefrash()}},{key:"slideoptRefrash",value:function(){var t=this,e=this.cfg,i=!1,n=e.WH.wid,l=1*e.mainfile[1]/n,o=this.getoffset(e.showObj).left;e.V_timeline.onmousedown=function(n){var s=0,a=0;(i=!0)&&(document.onmousemove=function(i){var n=i||window.event;s=n.pageX||n.clientX;var a=parseInt((s-o)*l);t.setAttr(e.V_playin,"style","width:"+(s-o)+"px"),e.playnowseconds=a,t.opts("jump",a)},document.onmouseup=function(n){var s=n||window.event;if(i){document.onmousemove=null,a=s.pageX||s.clientX;var c=parseInt((a-o)*l);t.setAttr(e.V_playin,"style","width:"+(a-o)+"px"),e.playnowseconds=c,t.opts("jump",c),"function"==typeof e.slidebackfn&&e.slidebackfn(e.playnowseconds)}i=!1})}}},{key:"timeformcat",value:function(t){var e=parseInt(t/3600),i=parseInt((t-3600*e)/60),n=parseInt(t-3600*e-60*i);return(e<10?"0"+e:e)+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}},{key:"timetoseconds",value:function(t){var e=t.split(":");return 3600*e[0]+60*e[1]+1*e[2]}},{key:"getid",value:function(t){return document.getElementById(t)}},{key:"appendvideo",value:function(t,e){for(var i=this.cfg,n=0;n<e;n++)t+='<div class="list"  id=list_'+n+"  >",t+='<div class="error"></div>',t+='<div class="loading" style="display:'+(this.platformcheck().mobile?"none":"block")+'"></div>',t+='<div class="title outtitle" style="display:'+i.titleshow+'">'+i.channeltitle[n]+"</div>","object"==_typeof(i.model[0])?"normal"===i.model[0].type?t+='<video width="100%"  height="100%" '+(this.platformcheck().mobile?"controls=controls":"")+'  id="video_'+n+'"   type="video/mp4" src='+i.channelB[n]+">对不起，您的浏览器不支持video播放!</video>":"high"===i.model[0].type?t+='<video width="100%"  height="100%" '+(this.platformcheck().mobile?"controls=controls":"")+'  id="video_'+n+'"   type="video/mp4" src='+i.channel[n]+">对不起，您的浏览器不支持video播放!</video>":"super"===i.model[0].type&&(t+='<video width="100%"  height="100%" '+(this.platformcheck().mobile?"controls=controls":"")+'  id="video_'+n+'"   type="video/mp4" src='+i.channelS[n]+">对不起，您的浏览器不支持video播放!</video>"):t+='<video width="100%"  height="100%" '+(this.platformcheck().mobile?"controls=controls":"")+'  id="video_'+n+'"   type="video/mp4" src='+i.channelB[n]+">对不起，您的浏览器不支持video播放!</video>",t+="</div>";return t}},{key:"createvideo",value:function(t){var e="";switch(t){case 1:case 2:case 3:case 4:e=this.appendvideo(e,t);break;case 5:case 6:var i=document.createElement("div");this.setAttr(i,"class","videopartLostDom"),e=this.appendvideo(e,t),5==t&&(e+='<div class="nosingal"  id=list_5   >NOSINGAL</div>');break;case 7:case 8:case 9:e=this.appendvideo(e,t),7==t&&(e+='<div class="nosingal" id=list_7   >NOSINGAL</div>',e+='<div class="nosingal"  id=list_8  >NOSINGAL</div>'),8==t&&(e+='<div id=list_8 class="nosingal" >NOSINGAL</div>')}return e}},{key:"countcreatevideo",value:function(t){var e=this.cfg;switch(this.platformcheck().mobile,e.WH.hei=e.WH.hei,t){case 1:this.setAttr(this.getid("list_0"),"style","width:"+(e.WH.wid-2)+"px;height:"+(e.WH.hei-2)+"px");break;case 2:for(var i,n=parseInt(e.WH.wid/2)-2,l=parseInt(e.WH.hei/2)-2,o=0;o<t;o++)0==o?(r="border-right:none;border-bottom:1px solid #666;",i=n+1):(r="border-bottom:1px solid #666;",i=n),this.setAttr(this.getid("list_"+o),"style",r+"width:"+i+"px;height:"+l+"px;top:"+parseInt((e.WH.hei-l)/2-e.listtopval)+"px");break;case 3:for(var n=parseInt(e.WH.wid/3),l=parseInt(e.WH.hei/2),s=parseInt((e.WH.hei-2*l)/2),o=0;o<t;o++)0==o?this.setAttr(this.getid("list_"+o),"style","border-right:none;width:"+(2*n-1)+"px;height:"+2*l+"px;top:"+s+"px"):1==o?this.setAttr(this.getid("list_"+o),"style","border-bottom:none;width:"+(n-2)+"px;height:"+l+"px;top:"+s+"px"):this.setAttr(this.getid("list_"+o),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;top:"+s+"px");break;case 4:for(var n=parseInt(e.WH.wid/2)-2,l=parseInt(e.WH.hei/2)-2,a=n+1,o=0;o<t;o++){r="";0==o?(r="border-right:none;border-bottom:none;",this.setAttr(this.getid("list_"+o),"style",r+"width:"+a+"px;height:"+l+"px;")):1==o?(r="border-bottom:none;",this.setAttr(this.getid("list_"+o),"style",r+"width:"+n+"px;height:"+l+"px;")):2==o?(r="border-right:none;",this.setAttr(this.getid("list_"+o),"style",r+"width:"+a+"px;height:"+l+"px;")):this.setAttr(this.getid("list_"+o),"style",r+"width:"+n+"px;height:"+l+"px;")}break;case 5:case 6:var n=parseInt(e.WH.wid/3),l=parseInt(e.WH.hei/3),c=document.createElement("div");this.setAttr(c,"class","videopartLostDom");for(o=0;o<t;o++)0==o?this.setAttr(this.getid("list_"+o),"style","width:"+(2*n-1)+"px;height:"+(2*l-1)+"px;border-right:none;border-bottom:none;"):1==o?this.setAttr(this.getid("list_"+o),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;border-bottom:none;"):2==o?this.setAttr(this.getid("list_"+o),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;border-bottom:none;"):3==o?this.setAttr(this.getid("list_"+o),"style","width:"+(n-2)+"px;margin-right:"+(e.WH.wid-3*n)+"px;height:"+(l-1)+"px;float:right;border-left:none;"):4==o?this.setAttr(this.getid("list_"+o),"style","width:"+(n-2)+"px;height:"+(l-1)+"px;float:right;"):5==o&&this.setAttr(this.getid("list_"+o),"style","width:"+(n-1)+"px;height:"+(l-1)+"px;border-right:none;");5==t&&this.setAttr(this.getid("list_5"),"style","border-right:none;width:"+(n-1)+"px;height:"+(l-1)+"px;line-height:"+l+"px;text-align:center;color:#fff");break;case 7:case 8:case 9:for(var n=parseInt(e.WH.wid/3)-2,l=parseInt(e.WH.hei/3)-1,a=n+1,o=0;o<t;o++){var r;0==o||1==o||3==o||4==o||6==o||7==o?(r="border-right:none;",this.setAttr(this.getid("list_"+o),"style",r+"width:"+a+"px;height:"+l+"px;")):(r="",this.setAttr(this.getid("list_"+o),"style",r+"width:"+n+"px;height:"+l+"px;"))}7==t&&(this.setAttr(this.getid("list_7"),"style","border-right:none;width:"+a+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff"),this.setAttr(this.getid("list_8"),"style","width:"+n+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff")),8==t&&this.setAttr(this.getid("list_8"),"style","width:"+n+"px;float:left;height:"+l+"px;line-height:"+l+"px;text-align:center;color:#fff")}}},{key:"getStyle",value:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}},{key:"getoffset",value:function(t,e){if(null==t)return e;e||((e={}).top=0,e.left=0);var i=this.getStyle(t,"position");if("absolute"==i||"relative"==i){if(t.getBoundingClientRect&&null!=navigator.userAgent.toLowerCase().match(/.(msie)/))return e.top+=t.getBoundingClientRect.top,e.left+=t.getBoundingClientRect.left,e;e.top+=t.offsetTop,e.left+=t.offsetLeft}else e.top+=0,e.left+=0;return this.getoffset(t.parentElement,e)}},{key:"idstyle",value:function(t,e){var i={},n=e;return.5625*t>e?e/.5625<=t?(i.hei=e,i.wid=parseInt(e/.5625)):(n-=10,this.idstyle(t,n)):(i.hei=parseInt(.5625*t),i.wid=t),i}},{key:"channelplayEvent",value:function(t){var e=this,i=(this.cfg,t.querySelectorAll(".modelspan"));Array.prototype.slice.call(i).forEach(function(i,n){i.addEventListener("click",function(i){var n=i||window.event;n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.cancelBubble=!0,n.returnValue=!1),t.querySelector(".selected").setAttribute("class","modelspan");var l=1*this.textContent;this.setAttribute("class","modelspan selected"),e.opts("playbackRate",l)},!1)})}},{key:"channelmodelEvent",value:function(t){var e=this,i=this.cfg,n=t.querySelectorAll(".modelspan");Array.prototype.slice.call(n).forEach(function(t,n){t.addEventListener("click",function(t){var n=t||window.event;n.preventDefault?(n.preventDefault(),n.stopPropagation()):(n.cancelBubble=!0,n.returnValue=!1),e.opts("removelistening"),i.V_pause.click(),e.opts("loading","block"),e.opts("error","none");var l=this.getAttribute("type");"normal"==l?e.opts("urlreplace",i.channelB):"super"==l?e.opts("urlreplace",i.channelS):e.opts("urlreplace",i.channel),i.durationcount=0,e.opts("init"),e.opts("duration","jump")},!1)})}},{key:"channelmuteEvent",value:function(t){var e=this,i=this.cfg,n=t.querySelectorAll(".mute"),l=i.V_scroll.getAttribute("volumval");Array.prototype.slice.call(n).forEach(function(n,o){n.addEventListener("click",function(n){var s=n||window.event;s.preventDefault?(s.preventDefault(),s.stopPropagation()):(s.cancelBubble=!0,s.returnValue=!1);var a=this.getAttribute("class");i.mutedid=this.getAttribute("id"),i.volmchannelopen?(e.setAttr(this,"class","mute iconon iconfont icon-yinliangkai"),e.opts("volum",l/100,o)):null!=a.match(/(iconon)/gi)?(e.setAttr(this,"class","mute iconoff iconfont icon-yinliangguan"),i.V_volum.click()):(t.querySelector(".iconon")&&e.setAttr(t.querySelector(".iconon"),"class","mute iconoff iconfont icon-yinliangguan"),e.setAttr(this,"class","mute iconon iconfont icon-yinliangkai"),null!=i.V_volum.className.indexOf("icon-yinliangguan")?i.V_volum.click():e.opts("volum",l/100,o))},!1)})}},{key:"FullScreen",value:function(t){if(t.requestFullScreen)t.requestFullScreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.webkitRequestFullScreen)t.webkitRequestFullScreen();else if(t.msRequestFullScreen)t.msRequestFullScreen();else{if(!t.msRequestFullscreen)return!0;t.msRequestFullscreen()}}},{key:"CancelFullScreen",value:function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else{if(!document.msExitFullScreen)return!0;document.msExitFullScreen()}}},{key:"escFullScreen",value:function(){var t=this.cfg;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(this.CancelFullScreen(),t.fullscreenObj.setAttribute("class","fullScreen iconfont icon-a"))}},{key:"opts",value:function(t,e,i){var n=this.cfg,l=this.getid(n.id).querySelectorAll(".list"),o=this,s="",a=void 0;if("updownvolum"==t){var c=parseInt(n.V_scroll.getAttribute("volumval"));"add"==e?(c+=2)>100&&(c=100):(c-=2)<=0&&(c=0);var r=n.mutedid.split("_")[1];return this["videobj_"+r].volumset(c/100),this.setAttr(n.V_scroll,"volumval",c),c<=0?(this.setAttr(n.V_volum,"class","volum iconfont icon-yinliangguan"),this["videobj_"+r].mute(!0)):(this.setAttr(n.V_volum,"class","volum iconfont icon-yinliangkai"),this["videobj_"+r].mute(!1)),this.setAttr(n.V_scrollsonbg,"style","width:"+c/2+"px"),void this.setAttr(n.V_scrollson,"style","left:"+c/2+"px")}for(var d=0;d<l.length;d++)switch(this["videobj_"+d]&&(a=this["videobj_"+d].readyState(d)),t){case"removelistening":this["videobj_"+d]&&this["videobj_"+d].removelistening();break;case"init":this["videobj_"+d]=new CFCMVideo("video_"+d),document.onselectstart=function(){return!1},"none"==this.getStyle(this.getid("video_"+d),"display")&&this.setStyle(this.getid("video_"+d),"display","block"),this["videobj_"+d].id.ondblclick=function(t){o.platformcheck().ie?alert("对不起,您的浏览器不支持双击全屏!"):(n.fullscreen=!0,o.FullScreen(this),this.setAttr(n.fullscreenObj,"class","outfullScreen iconfont icon-quanpingtuichu"))},n.setchannel?d!=n.mainfile[0]?(this["videobj_"+d].mute("false"),s+='<div id="mute_'+d+'" class="mute iconoff iconfont icon-yinliangguan" title="'+n.channeltitle[d]+'">'+n.channeltitle[d]+"</div>"):(s+='<div id="mute_'+d+'" class="mute iconon iconfont icon-yinliangkai" title="'+n.channeltitle[d]+'">'+n.channeltitle[d]+"</div>",n.mutedid="mute_"+d):n.mutedid&&n.mutedid.split("_")[1]==d?s+='<div id="mute_'+d+'" class="mute iconon iconfont icon-yinliangkai" title="'+n.channeltitle[d]+'">'+n.channeltitle[d]+"</div>":(this["videobj_"+d].mute("false"),s+='<div id="mute_'+d+'" class="mute iconoff iconfont icon-yinliangguan" title="'+n.channeltitle[d]+'">'+n.channeltitle[d]+"</div>");break;case"duration":this.durationcallback(d,e);break;case"play":0!=a.state?this["videobj_"+d].play():this.errordeal(d);break;case"pause":0!=a.state?this["videobj_"+d].pause():this.errordeal(d);break;case"playbackRate":0!=a.state?this["videobj_"+d].playbackRate(e):this.errordeal(d);break;case"jump":0!=a.state?(i?"add"==i?e+5>=n.totaltime?this["videobj_"+d].playtoseconds(0):this["videobj_"+d].playtoseconds(e+5):e-5<=0?this["videobj_"+d].playtoseconds(0):this["videobj_"+d].playtoseconds(e-5):(console.log("jumpto"+e+"秒"),this["videobj_"+d].playtoseconds(e)),n.playnowseconds=e):this.errordeal(d);break;case"volum":0!=a.state?void 0!=i?i==d?(this["videobj_"+d].volumset(e),0==e?(this.setAttr(n.V_volumcontrollist.children[d],"class","mute iconoff iconfont icon-yinliangguan"),this["videobj_"+d].mute(!0)):(this.setAttr(n.V_volumcontrollist.children[d],"class","mute iconon iconfont icon-yinliangkai"),this["videobj_"+d].mute(!1))):(this["videobj_"+d].volumset(0),this["videobj_"+d].mute(!0),this.setAttr(n.V_volumcontrollist.children[d],"class","mute iconoff iconfont icon-yinliangguan")):(this["videobj_"+d].volumset(e),0==e?(this.setAttr(n.V_volumcontrollist.children[d],"class","mute iconoff iconfont icon-yinliangguan"),this["videobj_"+d].mute(!0)):(this.setAttr(n.V_volumcontrollist.children[d],"class","mute iconon iconfont icon-yinliangkai"),this["videobj_"+d].mute(!1))):this.errordeal(d);break;case"urlreplace":this.setAttr(this["videobj_"+d].id,"src",e[d]);break;case"loading":this.setStyle(this.getid("list_"+d).querySelector(".loading"),"display",e);break;case"error":this.setStyle(this.getid("list_"+d).querySelector(".error"),"display",e)}if("init"==t){var u="";if(n.model.length>0)for(var h=0;h<n.model.length;h++)u+='<span class="modelspan" type='+n.model[h].type+">"+n.model[h].name+"</span>";if(n.playbackRateflag){var p="";if(n.playbackRate.length>0)for(var m=n.playbackRate.length-1;m>=0;m--)1==n.playbackRate[m]?(console.log("222"),p+='<span class="modelspan selected" >'+n.playbackRate[m]+"</span>"):p+='<span class="modelspan" >'+n.playbackRate[m]+"</span>";""==n.V_playcontrollist.innerHTML&&(n.V_playcontrollist.innerHTML=p),this.setAttr(n.V_playcontrollist,"style","top:-"+(20*(n.playbackRate.length+1)+11)+"px;"),this.channelplayEvent(n.V_playcontrollist)}n.V_modelcontrollist.innerHTML=u,n.V_volumcontrollist.innerHTML=s,this.setAttr(n.V_modelcontrollist,"style","top:-"+(20*(n.model.length+1)+11)+"px;"),this.setAttr(n.V_volumcontrollist,"style","top:-"+(20*(l.length+1)+11)+"px;"),this.channelmuteEvent(n.V_volumcontrollist),this.channelmodelEvent(n.V_modelcontrollist)}}},{key:"errordeal",value:function(t){var e=this.cfg;if("block"==this.getStyle(this.getid("video_"+t),"display")){this.setStyle(this.getid("video_"+t),"display","none"),this.setStyle(this.getid("mute_"+t),"display","none");var i=parseInt(this.getStyle(e.V_volumcontrollist,"top"))+20;e.V_volumcontrollist.style.top=i+"px"}this["videobj_"+t]&&(this.setStyle(this.getid("list_"+t).querySelector(".loading"),"display","none"),this.setStyle(this.getid("list_"+t).querySelector(".error"),"display","block"))}},{key:"durationcallback",value:function(t,e){var i=this,n=this.cfg;this["videobj_"+t].duration(function(l){if(n.setchannel&&t==n.mainfile[0]&&(n.totaltime=parseInt(l),n.nowchannelnum=t,n.V_totaltime.innerHTML=i.timeformcat(parseInt(l)),n.mainfile[1]=parseInt(l),i.videoopt(),i.addknowledge()),!n.setchannel&&!n.mainfile[1]){n.mutedid="mute_"+t,n.nowchannelnum=t;var o=i.getid(n.mutedid);o.className=o.className.replace(/(icon-yinliangguan)/gi,"icon-yinliangkai"),n.V_totaltime.innerHTML=i.timeformcat(parseInt(l)),n.mainfile[1]=parseInt(l),n.totaltime=parseInt(l),i.videoopt(),i.addknowledge(),i["videobj_"+t].mute(!1),i["videobj_"+t].volumset(.5)}if(i.slideRefrash(),i.setStyle(i.getid("list_"+t).getElementsByClassName("loading")[0],"display","none"),n.durationcount++,n.durationcount==n.channelnum){if("jump"==e&&(i.opts("jump",n.playnowseconds),i.opts("loading","none")),n.autojump)if(n.totaltime<n.autojump){var s=parseInt(n.autojump/n.totaltime);i.opts("jump",n.autojump-s*n.totaltime)}else i.opts("jump",n.autojump);n.autoplay&&n.V_play.click()}else console.log("未加载完全，播放等待中"+t)})}},{key:"remove",value:function(t){var e=t.parentNode;e&&e.removeChild(t)}}]),t}(),h5demo=new LocalVideo(infos);
export function LocalVideo(param) {
	return new LocalVideo(param)
}